# L4D2 Top-Down Prototype

基于 **Vite + React + TypeScript + Phaser 3** 的《求生之路2》俯视角原型，面向微信/Telegram 小游戏目标设备，聚焦移动端双摇杆体验、多武器/特感系统与关卡波次流程。

## 运行与构建

```bash
# 安装依赖
npm install

# 本地开发（含 HMR）
npm run dev

# 生产构建
npm run build
```

## 主要功能

- **移动端双摇杆控制**：左摇杆移动、右摇杆瞄准射击，支持灵敏度/死区调节与简单瞄准辅助；基础手柄输入已预留。
- **武器与投掷物系统**：主副武器切换、子弹对象池、投掷物（燃烧瓶/震撼弹）区域伤害，HUD 实时展示弹药。
- **特感数据驱动**：Boomer、Hunter、Smoker、Jockey、Charger、Spitter、Tank、Witch 八类特感，包含核心技能参数及 AI 行为。
- **关卡波次调度**：根据“死亡中心-旅馆”流程定义节点与波次组合，场景导演自动推进，HUD 显示阶段与倒计时。
- **反馈与打磨**：命中粒子效果、屏幕震动、暂停菜单、状态横幅提示、触控辅助。
- **网络接口占位**：`apiClient` 预留 RESTful & 事件订阅结构，便于后续接入实时联机。

## 目录结构概览

- `src/components/`：React UI（Phaser 容器、HUD、状态条等）
- `src/phaser/`：
  - `entities/` 玩家与感染者实体
  - `systems/` 武器、投掷物、关卡/特感导演
  - `input/VirtualJoystick.ts` 触控摇杆实现
- `src/data/`：特感配置与场景流程数据
- `src/services/api/`：REST + 事件订阅占位实现

## 控制说明

- **移动**：左侧摇杆 / 手柄左摇杆
- **瞄准射击**：右侧摇杆 / 手柄右摇杆
- **投掷物**：`E`（燃烧瓶）、`R`（震撼弹）
- **切换武器**：`1` 主、`2` 副、`Q` 快速切换
- **阵营切换**：`F`（幸存者 / 感染者原型）
- **感染者技能（原型）**：`Space`
- **暂停**：`Esc`

## 后续扩展建议

- 联机同步（WebSocket / Colyseus）、房间匹配与状态广播
- 更丰富的武器、投掷物、技能树与成长系统
- AI 队友、复活机制、Boss 战与更复杂的地图事件
- 音频替换、性能优化与小游戏平台适配
